import{J as Me,S as ne,i as le,s as ae,k as y,q as S,a as F,l as T,m as k,r as O,c as N,h as d,n as f,b as j,G as p,K as U,u as V,g as w,v as W,d as x,f as J,L as ye,M as fe,N as Pe,e as he,y as Te,z as Ee,A as xe,B as $e,H as de,O as G,P as K,Q as pe,R as Ie,T as Ae,o as Fe,U as Ne,V as Se,t as Oe,W as Ce}from"../chunks/index.77ced518.js";function De(r){const t=r-1;return t*t*t+1}function _e(r,{delay:t=0,duration:a=400,easing:e=Me}={}){const l=+getComputedStyle(r).opacity;return{delay:t,duration:a,easing:e,css:c=>`opacity: ${c*l}`}}function Ve(r,{delay:t=0,duration:a=400,easing:e=De,axis:l="y"}={}){const c=getComputedStyle(r),o=+c.opacity,s=l==="y"?"height":"width",n=parseFloat(c[s]),i=l==="y"?["top","bottom"]:["left","right"],u=i.map(m=>`${m[0].toUpperCase()}${m.slice(1)}`),_=parseFloat(c[`padding${u[0]}`]),z=parseFloat(c[`padding${u[1]}`]),P=parseFloat(c[`margin${u[0]}`]),C=parseFloat(c[`margin${u[1]}`]),H=parseFloat(c[`border${u[0]}Width`]),b=parseFloat(c[`border${u[1]}Width`]);return{delay:t,duration:a,easing:e,css:m=>`overflow: hidden;opacity: ${Math.min(m*20,1)*o};${s}: ${m*n}px;padding-${i[0]}: ${m*_}px;padding-${i[1]}: ${m*z}px;margin-${i[0]}: ${m*P}px;margin-${i[1]}: ${m*C}px;border-${i[0]}-width: ${m*H}px;border-${i[1]}-width: ${m*b}px;`}}var te={title:"",sentences:[]};async function ze(){const r=window.location+"/booklist.json";return new Promise((t,a)=>{fetch(r).then(e=>{e.json().then(async l=>{await He(l[0]),t(te)})})})}async function He(r){const t=window.location+"/books/"+r+".json";let e=await(await fetch(t)).json();te.title=r,te.sentences=e}const Le="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";async function Ue(r){return(await(await fetch("https://api.openai.com/v1/engines/text-davinci-003/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Le},body:JSON.stringify({prompt:r,max_tokens:100,temperature:.7,top_p:1,n:1,stream:!1,logprobs:null,stop:[`
`]})})).json()).choices[0].text}var M=new Map([]);const We="french",Je="Harry Potter and the Philosopher's Stone";async function je(r){if(Y.has(r))return Y.get(r);let t=await Re(r),a=t.filter(s=>M.has(s.original)&&M.get(s.original).some(n=>n.translation==s.translation&&n.known)),l=t.filter(s=>!a.includes(s))[0],c=a.concat(l);M.has(l.original)?M.get(l.original).some(s=>s.translation==l.translation)||M.get(l.original).push({original:l.original,translation:l.translation,known:!1}):M.set(l.original,[{original:l.original,translation:l.translation,known:!1}]),Be(l.translation,l.original,!0);var o=[r];return c.forEach((s,n)=>{var i=[];o.forEach(u=>{if(typeof u=="string"&&u.includes(s.original)){var _=u.split(s.original);i.push(_[0]),i.push(s),i.push(_[1])}else i.push(u)}),o=i}),o}function Re(r){r=r.replaceAll(`
`,"");var t=[];M.forEach((l,c)=>{l.forEach(o=>{r.includes(o.original)&&t.push(o.original)})});var a=`[{"original":"${t[0]}`;t.length==0&&(a='[{"original":"');var e=`Request: I am trying to learn ${We} by reading a ${Je}.
`;return e+=`Right now am reading this abstract: ${r}.
`,t.length==0?e+=`pick exactly one more word that makes sense to learn and translate in a way that makes sense in the context oof the abstract.
`:e+=`translate the following words into french in a way that makes sense in the context of the given abstract: [${t.join(", ")}] and pick exactly one more word that makes sense to learn and translate it also.
`,e+=`put the translations in the following json format: [{"original":"apple","translation":"pomme"},{"original":"Hello","translation":"Bonjour"}]
`,e+=`
`,e+="Answer: "+a,new Promise((l,c)=>{var o="";Ue(e).then(s=>{o=a+s;var n=JSON.parse(o);l(n)}).catch(s=>{console.log("got data string: ",o),console.error(s),c(s)})})}var Y=new Map;function qe(r){Y.has(r)||Y.set(r,je(r))}function Be(r,t,a){try{M.get(t).forEach(l=>{if(l.translation==r){l.known=a;return}else console.log("voc:",l.translation,r)})}catch(e){console.error(e)}}function ge(r){let t,a=r[0].original+"",e,l,c;return{c(){t=y("div"),e=S(a),this.h()},l(o){t=T(o,"DIV",{class:!0});var s=k(t);e=O(s,a),s.forEach(d),this.h()},h(){f(t,"class","absolute mt-1 p-1 px-4 z-10 bg-gray-700 bg-opacity-100 rounded shadow-md")},m(o,s){j(o,t,s),p(t,e),c=!0},p(o,s){(!c||s&1)&&a!==(a=o[0].original+"")&&V(e,a)},i(o){c||(ye(()=>{c&&(l||(l=fe(t,_e,{},!0)),l.run(1))}),c=!0)},o(o){l||(l=fe(t,_e,{},!1)),l.run(0),c=!1},d(o){o&&d(t),o&&l&&l.end()}}}function Qe(r){let t,a=r[0].translation+"",e,l,c,o,s,n=r[2]===r[1]&&ge(r);return{c(){t=y("button"),e=S(a),l=F(),n&&n.c(),this.h()},l(i){t=T(i,"BUTTON",{class:!0});var u=k(t);e=O(u,a),l=N(u),n&&n.l(u),u.forEach(d),this.h()},h(){f(t,"class","text-primary relative")},m(i,u){j(i,t,u),p(t,e),p(t,l),n&&n.m(t,null),c=!0,o||(s=U(t,"click",r[3]),o=!0)},p(i,[u]){(!c||u&1)&&a!==(a=i[0].translation+"")&&V(e,a),i[2]===i[1]?n?(n.p(i,u),u&6&&w(n,1)):(n=ge(i),n.c(),w(n,1),n.m(t,null)):n&&(W(),x(n,1,1,()=>{n=null}),J())},i(i){c||(w(n),c=!0)},o(i){x(n),c=!1},d(i){i&&d(t),n&&n.d(),o=!1,s()}}}function Ge(r,t,a){let{data:e}=t,{index:l}=t,{openTooltipIndex:c}=t,{toggleTooltip:o}=t;function s(){o(l),Be(e.translation,e.original,!1)}return r.$$set=n=>{"data"in n&&a(0,e=n.data),"index"in n&&a(1,l=n.index),"openTooltipIndex"in n&&a(2,c=n.openTooltipIndex),"toggleTooltip"in n&&a(4,o=n.toggleTooltip)},[e,l,c,s,o]}class Ke extends ne{constructor(t){super(),le(this,t,Ge,Qe,ae,{data:0,index:1,openTooltipIndex:2,toggleTooltip:4})}}function me(r,t,a){const e=r.slice();return e[4]=t[a],e[6]=a,e}function Ye(r){let t,a;return t=new Ke({props:{data:r[4],index:r[6],openTooltipIndex:r[1],toggleTooltip:r[2]}}),{c(){Te(t.$$.fragment)},l(e){Ee(t.$$.fragment,e)},m(e,l){xe(t,e,l),a=!0},p(e,l){const c={};l&1&&(c.data=e[4]),l&2&&(c.openTooltipIndex=e[1]),t.$set(c)},i(e){a||(w(t.$$.fragment,e),a=!0)},o(e){x(t.$$.fragment,e),a=!1},d(e){$e(t,e)}}}function Xe(r){let t=r[4]+"",a;return{c(){a=S(t)},l(e){a=O(e,t)},m(e,l){j(e,a,l)},p(e,l){l&1&&t!==(t=e[4]+"")&&V(a,t)},i:de,o:de,d(e){e&&d(a)}}}function ve(r){let t,a,e,l;const c=[Xe,Ye],o=[];function s(n,i){return typeof n[4]=="string"?0:1}return t=s(r),a=o[t]=c[t](r),{c(){a.c(),e=he()},l(n){a.l(n),e=he()},m(n,i){o[t].m(n,i),j(n,e,i),l=!0},p(n,i){let u=t;t=s(n),t===u?o[t].p(n,i):(W(),x(o[u],1,1,()=>{o[u]=null}),J(),a=o[t],a?a.p(n,i):(a=o[t]=c[t](n),a.c()),w(a,1),a.m(e.parentNode,e))},i(n){l||(w(a),l=!0)},o(n){x(a),l=!1},d(n){o[t].d(n),n&&d(e)}}}function Ze(r){let t,a,e=r[0],l=[];for(let o=0;o<e.length;o+=1)l[o]=ve(me(r,e,o));const c=o=>x(l[o],1,1,()=>{l[o]=null});return{c(){t=y("p");for(let o=0;o<l.length;o+=1)l[o].c()},l(o){t=T(o,"P",{});var s=k(t);for(let n=0;n<l.length;n+=1)l[n].l(s);s.forEach(d)},m(o,s){j(o,t,s);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,null);a=!0},p(o,[s]){if(s&7){e=o[0];let n;for(n=0;n<e.length;n+=1){const i=me(o,e,n);l[n]?(l[n].p(i,s),w(l[n],1)):(l[n]=ve(i),l[n].c(),w(l[n],1),l[n].m(t,null))}for(W(),n=e.length;n<l.length;n+=1)c(n);J()}},i(o){if(!a){for(let s=0;s<e.length;s+=1)w(l[s]);a=!0}},o(o){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)x(l[s]);a=!1},d(o){o&&d(t),Pe(l,o)}}}function et(r,t,a){let{txt:e}=t;var l=[];je(e).then(s=>{a(0,l=s)});let c=-1,o=s=>{a(1,c=c===s?-1:s)};return r.$$set=s=>{"txt"in s&&a(3,e=s.txt)},[l,c,o,e]}class tt extends ne{constructor(t){super(),le(this,t,et,Ze,ae,{txt:3})}}function ke(r,t,a){const e=r.slice();return e[9]=t[a],e}function be(r){let t,a,e=[],l=new Map,c,o=r[2];const s=n=>n[0];for(let n=0;n<o.length;n+=1){let i=ke(r,o,n),u=s(i);l.set(u,e[n]=we(u,i))}return{c(){t=y("div"),a=y("div");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=T(n,"DIV",{class:!0});var i=k(t);a=T(i,"DIV",{class:!0});var u=k(a);for(let _=0;_<e.length;_+=1)e[_].l(u);u.forEach(d),i.forEach(d),this.h()},h(){f(a,"class","display text-center pb-20 p-10 text-3xl leading-loose"),f(t,"class","m-auto")},m(n,i){j(n,t,i),p(t,a);for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(a,null);c=!0},p(n,i){i&5&&(o=n[2],W(),e=Ne(e,i,s,1,n,o,l,a,Ce,we,null,ke),J())},i(n){if(!c){for(let i=0;i<o.length;i+=1)w(e[i]);c=!0}},o(n){for(let i=0;i<e.length;i+=1)x(e[i]);c=!1},d(n){n&&d(t);for(let i=0;i<e.length;i+=1)e[i].d()}}}function we(r,t){let a,e,l,c,o;return e=new tt({props:{txt:t[2][0]}}),{key:r,first:null,c(){a=y("div"),Te(e.$$.fragment),l=F(),this.h()},l(s){a=T(s,"DIV",{});var n=k(a);Ee(e.$$.fragment,n),l=N(n),n.forEach(d),this.h()},h(){this.first=a},m(s,n){j(s,a,n),xe(e,a,null),p(a,l),o=!0},p(s,n){t=s;const i={};n&4&&(i.txt=t[2][0]),e.$set(i)},i(s){o||(w(e.$$.fragment,s),c||ye(()=>{c=Se(a,Ve,{duration:10}),c.start()}),o=!0)},o(s){x(e.$$.fragment,s),o=!1},d(s){s&&d(a),$e(e)}}}function nt(r){let t,a,e,l,c,o,s,n,i,u=r[0]+1+"",_,z,P=r[1].sentences.length+"",C,H,b,m,X,D,L=r[1].title.replaceAll("_"," ")+"",R,Z,B,E,A,q,$,ee,oe,g=r[0]!=-1&&be(r);return{c(){t=y("div"),g&&g.c(),a=F(),e=y("div"),l=y("button"),c=G("svg"),o=G("path"),n=F(),i=y("span"),_=S(u),z=S("/"),C=S(P),H=F(),b=y("input"),X=F(),D=y("span"),R=S(L),Z=F(),B=y("button"),E=G("svg"),A=G("path"),this.h()},l(h){t=T(h,"DIV",{class:!0});var v=k(t);g&&g.l(v),v.forEach(d),a=N(h),e=T(h,"DIV",{class:!0});var I=k(e);l=T(I,"BUTTON",{});var re=k(l);c=K(re,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var se=k(c);o=K(se,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(o).forEach(d),se.forEach(d),re.forEach(d),n=N(I),i=T(I,"SPAN",{class:!0});var Q=k(i);_=O(Q,u),z=O(Q,"/"),C=O(Q,P),Q.forEach(d),H=N(I),b=T(I,"INPUT",{type:!0,min:!0,max:!0,class:!0}),X=N(I),D=T(I,"SPAN",{class:!0});var ie=k(D);R=O(ie,L),ie.forEach(d),Z=N(I),B=T(I,"BUTTON",{});var ce=k(B);E=K(ce,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var ue=k(E);A=K(ue,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),k(A).forEach(d),ue.forEach(d),ce.forEach(d),I.forEach(d),this.h()},h(){f(t,"class","flex h-screen"),f(o,"stroke-linecap","round"),f(o,"stroke-linejoin","round"),f(o,"d","M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"),f(c,"xmlns","http://www.w3.org/2000/svg"),f(c,"fill","none"),f(c,"viewBox","0 0 24 24"),f(c,"stroke-width","1.5"),f(c,"stroke","currentColor"),f(c,"class","w-6 h-6"),l.disabled=s=r[0]<1,f(i,"class","text-xl"),f(b,"type","number"),f(b,"min","1"),f(b,"max",m=r[1].sentences.length),f(b,"class","page-input"),f(D,"class","text-xl"),f(A,"stroke-linecap","round"),f(A,"stroke-linejoin","round"),f(A,"d","M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"),f(E,"xmlns","http://www.w3.org/2000/svg"),f(E,"fill","none"),f(E,"viewBox","0 0 24 24"),f(E,"stroke-width","1.5"),f(E,"stroke","currentColor"),f(E,"class","w-6 h-6"),B.disabled=q=r[0]>=r[1].sentences.length-1,f(e,"class","btm-nav")},m(h,v){j(h,t,v),g&&g.m(t,null),j(h,a,v),j(h,e,v),p(e,l),p(l,c),p(c,o),p(e,n),p(e,i),p(i,_),p(i,z),p(i,C),p(e,H),p(e,b),pe(b,r[3]),p(e,X),p(e,D),p(D,R),p(e,Z),p(e,B),p(B,E),p(E,A),$=!0,ee||(oe=[U(l,"click",r[5]),U(b,"input",r[7]),U(b,"input",r[6]),U(B,"click",r[4])],ee=!0)},p(h,[v]){h[0]!=-1?g?(g.p(h,v),v&1&&w(g,1)):(g=be(h),g.c(),w(g,1),g.m(t,null)):g&&(W(),x(g,1,1,()=>{g=null}),J()),(!$||v&1&&s!==(s=h[0]<1))&&(l.disabled=s),(!$||v&1)&&u!==(u=h[0]+1+"")&&V(_,u),(!$||v&2)&&P!==(P=h[1].sentences.length+"")&&V(C,P),(!$||v&2&&m!==(m=h[1].sentences.length))&&f(b,"max",m),v&8&&Ie(b.value)!==h[3]&&pe(b,h[3]),(!$||v&2)&&L!==(L=h[1].title.replaceAll("_"," ")+"")&&V(R,L),(!$||v&3&&q!==(q=h[0]>=h[1].sentences.length-1))&&(B.disabled=q)},i(h){$||(w(g),$=!0)},o(h){x(g),$=!1},d(h){h&&d(t),g&&g.d(),h&&d(a),h&&d(e),ee=!1,Ae(oe)}}}function lt(r,t,a){let e=-1;var l={title:"",sentences:[""]},c=[""];function o(){a(0,e=Math.min(l.sentences.length,e+1)),a(2,c=[l.sentences[e]]),Oe().then(()=>{qe(l.sentences[e+1])})}function s(){a(0,e=Math.max(0,e-1)),a(2,c=[l.sentences[e]])}let n=1;function i(){n!=null&&(a(0,e=n-1),a(2,c=[l.sentences[e]]))}Fe(()=>{window.addEventListener("keydown",_=>{_.key=="ArrowLeft"||_.key=="a"?s():(_.key=="ArrowRight"||_.key=="d"||_.key==" ")&&o()}),ze().then(_=>{a(1,l=_),o()})});function u(){n=Ie(this.value),a(3,n)}return[e,l,c,n,o,s,i,u]}class ot extends ne{constructor(t){super(),le(this,t,lt,nt,ae,{})}}export{ot as component};
