var Me=Object.defineProperty;var Ve=(a,e,i)=>e in a?Me(a,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[e]=i;var pe=(a,e,i)=>(Ve(a,typeof e!="symbol"?e+"":e,i),i);import{J as Je,S as R,i as $,s as K,k as b,q as N,a as O,l as k,m,r as I,c as j,h as f,n as h,b as v,G as d,K as A,u as P,g as T,v as z,d as D,f as G,L as Pe,M as me,N as te,e as be,y as le,z as ne,A as oe,B as ie,H as ee,O as X,P as Z,Q as ke,R as xe,T as Ue,o as Ae}from"../chunks/index.f8276928.js";function ve(a,{delay:e=0,duration:i=400,easing:o=Je}={}){const l=+getComputedStyle(a).opacity;return{delay:e,duration:i,easing:o,css:c=>`opacity: ${c*l}`}}function ye(a){let e,i=a[0].original+"",o,l,c;return{c(){e=b("div"),o=N(i),this.h()},l(r){e=k(r,"DIV",{class:!0});var t=m(e);o=I(t,i),t.forEach(f),this.h()},h(){h(e,"class","absolute mt-1 p-1 px-4 z-10 bg-gray-700 bg-opacity-100 rounded shadow-md")},m(r,t){v(r,e,t),d(e,o),c=!0},p(r,t){(!c||t&1)&&i!==(i=r[0].original+"")&&P(o,i)},i(r){c||(Pe(()=>{c&&(l||(l=me(e,ve,{},!0)),l.run(1))}),c=!0)},o(r){l||(l=me(e,ve,{},!1)),l.run(0),c=!1},d(r){r&&f(e),r&&l&&l.end()}}}function Ce(a){let e,i=a[0].translation+"",o,l,c,r,t,n=a[2]===a[1]&&ye(a);return{c(){e=b("button"),o=N(i),l=O(),n&&n.c(),this.h()},l(s){e=k(s,"BUTTON",{class:!0});var u=m(e);o=I(u,i),l=j(u),n&&n.l(u),u.forEach(f),this.h()},h(){h(e,"class","text-primary relative")},m(s,u){v(s,e,u),d(e,o),d(e,l),n&&n.m(e,null),c=!0,r||(t=A(e,"click",a[3]),r=!0)},p(s,[u]){(!c||u&1)&&i!==(i=s[0].translation+"")&&P(o,i),s[2]===s[1]?n?(n.p(s,u),u&6&&T(n,1)):(n=ye(s),n.c(),T(n,1),n.m(e,null)):n&&(z(),D(n,1,1,()=>{n=null}),G())},i(s){c||(T(n),c=!0)},o(s){D(n),c=!1},d(s){s&&f(e),n&&n.d(),r=!1,t()}}}function Le(a,e,i){let{data:o}=e,{index:l}=e,{openTooltipIndex:c}=e,{toggleTooltip:r}=e,{fail:t}=e;function n(){r(l),t()}return a.$$set=s=>{"data"in s&&i(0,o=s.data),"index"in s&&i(1,l=s.index),"openTooltipIndex"in s&&i(2,c=s.openTooltipIndex),"toggleTooltip"in s&&i(4,r=s.toggleTooltip),"fail"in s&&i(5,t=s.fail)},[o,l,c,n,r,t]}class He extends R{constructor(e){super(),$(this,e,Le,Ce,K,{data:0,index:1,openTooltipIndex:2,toggleTooltip:4,fail:5})}}function we(a,e,i){const o=a.slice();return o[4]=e[i],o[6]=i,o}function We(a){let e,i;function o(){return a[3](a[4])}return e=new He({props:{data:{original:a[4][1],translation:a[4][0]},index:a[6],openTooltipIndex:a[1],toggleTooltip:a[2],fail:o}}),{c(){le(e.$$.fragment)},l(l){ne(e.$$.fragment,l)},m(l,c){oe(e,l,c),i=!0},p(l,c){a=l;const r={};c&1&&(r.data={original:a[4][1],translation:a[4][0]}),c&2&&(r.openTooltipIndex=a[1]),c&1&&(r.fail=o),e.$set(r)},i(l){i||(T(e.$$.fragment,l),i=!0)},o(l){D(e.$$.fragment,l),i=!1},d(l){ie(e,l)}}}function qe(a){let e=a[4]+"",i;return{c(){i=N(e)},l(o){i=I(o,e)},m(o,l){v(o,i,l)},p(o,l){l&1&&e!==(e=o[4]+"")&&P(i,e)},i:ee,o:ee,d(o){o&&f(i)}}}function Ee(a){let e,i,o,l;const c=[qe,We],r=[];function t(n,s){return typeof n[4]=="string"?0:1}return e=t(a),i=r[e]=c[e](a),{c(){i.c(),o=be()},l(n){i.l(n),o=be()},m(n,s){r[e].m(n,s),v(n,o,s),l=!0},p(n,s){let u=e;e=t(n),e===u?r[e].p(n,s):(z(),D(r[u],1,1,()=>{r[u]=null}),G(),i=r[e],i?i.p(n,s):(i=r[e]=c[e](n),i.c()),T(i,1),i.m(o.parentNode,o))},i(n){l||(T(i),l=!0)},o(n){D(i),l=!1},d(n){r[e].d(n),n&&f(o)}}}function ze(a){let e,i,o=a[0].data,l=[];for(let r=0;r<o.length;r+=1)l[r]=Ee(we(a,o,r));const c=r=>D(l[r],1,1,()=>{l[r]=null});return{c(){e=b("p");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=k(r,"P",{class:!0});var t=m(e);for(let n=0;n<l.length;n+=1)l[n].l(t);t.forEach(f),this.h()},h(){h(e,"class","m-auto display text-center pb-20 p-10 text-3xl leading-loose")},m(r,t){v(r,e,t);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,null);i=!0},p(r,[t]){if(t&7){o=r[0].data;let n;for(n=0;n<o.length;n+=1){const s=we(r,o,n);l[n]?(l[n].p(s,t),T(l[n],1)):(l[n]=Ee(s),l[n].c(),T(l[n],1),l[n].m(e,null))}for(z(),n=o.length;n<l.length;n+=1)c(n);G()}},i(r){if(!i){for(let t=0;t<o.length;t+=1)T(l[t]);i=!0}},o(r){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)D(l[t]);i=!1},d(r){r&&f(e),te(l,r)}}}function Ge(a,e,i){let{challenge:o}=e,l=-1,c=t=>{i(1,l=l===t?-1:t)};const r=t=>o.fail([t[0],t[1]]);return a.$$set=t=>{"challenge"in t&&i(0,o=t.challenge)},[o,l,c,r]}class Re extends R{constructor(e){super(),$(this,e,Ge,ze,K,{challenge:0})}}async function $e(){return await(await fetch("./index.json")).json()}async function Ke(a,e,i){const o=`./books/${i}/${a}2${e}.json`,l=`./books/${i}/${e}2${a}.json`;var c=!1;let r;try{r=await(await fetch(o)).json()}catch{r=await(await fetch(l)).json(),c=!0}return{title:i,switched:c,data:r}}function Te(a,e,i){const o=a.slice();return o[14]=e[i],o[12]=i,o}function Ne(a,e,i){const o=a.slice();return o[10]=e[i],o[12]=i,o}function Ie(a,e,i){const o=a.slice();return o[10]=e[i],o[12]=i,o}function Qe(a){let e,i,o,l,c=a[2].books,r=[];for(let t=0;t<c.length;t+=1)r[t]=Be(Te(a,c,t));return{c(){e=b("h2"),i=N("Pick a book"),o=O(),l=b("div");for(let t=0;t<r.length;t+=1)r[t].c();this.h()},l(t){e=k(t,"H2",{class:!0});var n=m(e);i=I(n,"Pick a book"),n.forEach(f),o=j(t),l=k(t,"DIV",{class:!0});var s=m(l);for(let u=0;u<r.length;u+=1)r[u].l(s);s.forEach(f),this.h()},h(){h(e,"class","text-3xl text-center text-gray-200 mb-6"),h(l,"class","flex justify-center")},m(t,n){v(t,e,n),d(e,i),v(t,o,n),v(t,l,n);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(l,null)},p(t,n){if(n&36){c=t[2].books;let s;for(s=0;s<c.length;s+=1){const u=Te(t,c,s);r[s]?r[s].p(u,n):(r[s]=Be(u),r[s].c(),r[s].m(l,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=c.length}},d(t){t&&f(e),t&&f(o),t&&f(l),te(r,t)}}}function Ye(a){let e,i,o,l,c=a[1].targets,r=[];for(let t=0;t<c.length;t+=1)r[t]=Oe(Ne(a,c,t));return{c(){e=b("h2"),i=N("What do you want to learn?"),o=O(),l=b("div");for(let t=0;t<r.length;t+=1)r[t].c();this.h()},l(t){e=k(t,"H2",{class:!0});var n=m(e);i=I(n,"What do you want to learn?"),n.forEach(f),o=j(t),l=k(t,"DIV",{class:!0});var s=m(l);for(let u=0;u<r.length;u+=1)r[u].l(s);s.forEach(f),this.h()},h(){h(e,"class","text-3xl text-center text-gray-200 mb-6"),h(l,"class","flex justify-center")},m(t,n){v(t,e,n),d(e,i),v(t,o,n),v(t,l,n);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(l,null)},p(t,n){if(n&18){c=t[1].targets;let s;for(s=0;s<c.length;s+=1){const u=Ne(t,c,s);r[s]?r[s].p(u,n):(r[s]=Oe(u),r[s].c(),r[s].m(l,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=c.length}},d(t){t&&f(e),t&&f(o),t&&f(l),te(r,t)}}}function Fe(a){let e,i,o,l,c=a[0],r=[];for(let t=0;t<c.length;t+=1)r[t]=je(Ie(a,c,t));return{c(){e=b("h2"),i=N("Whats your native language?"),o=O(),l=b("div");for(let t=0;t<r.length;t+=1)r[t].c();this.h()},l(t){e=k(t,"H2",{class:!0});var n=m(e);i=I(n,"Whats your native language?"),n.forEach(f),o=j(t),l=k(t,"DIV",{class:!0});var s=m(l);for(let u=0;u<r.length;u+=1)r[u].l(s);s.forEach(f),this.h()},h(){h(e,"class","text-3xl text-center text-gray-200 mb-6"),h(l,"class","flex justify-center")},m(t,n){v(t,e,n),d(e,i),v(t,o,n),v(t,l,n);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(l,null)},p(t,n){if(n&9){c=t[0];let s;for(s=0;s<c.length;s+=1){const u=Ie(t,c,s);r[s]?r[s].p(u,n):(r[s]=je(u),r[s].c(),r[s].m(l,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=c.length}},d(t){t&&f(e),t&&f(o),t&&f(l),te(r,t)}}}function Be(a){let e,i=a[14]+"",o,l,c;function r(){return a[9](a[12])}return{c(){e=b("button"),o=N(i),this.h()},l(t){e=k(t,"BUTTON",{class:!0});var n=m(e);o=I(n,i),n.forEach(f),this.h()},h(){h(e,"class","px-4 py-2 bg-blue-500 text-white rounded-md m-2")},m(t,n){v(t,e,n),d(e,o),l||(c=A(e,"click",r),l=!0)},p(t,n){a=t,n&4&&i!==(i=a[14]+"")&&P(o,i)},d(t){t&&f(e),l=!1,c()}}}function Oe(a){let e,i=a[10].language+"",o,l,c;function r(){return a[8](a[12])}return{c(){e=b("button"),o=N(i),this.h()},l(t){e=k(t,"BUTTON",{class:!0});var n=m(e);o=I(n,i),n.forEach(f),this.h()},h(){h(e,"class","px-4 py-2 bg-blue-500 text-white rounded-md m-2")},m(t,n){v(t,e,n),d(e,o),l||(c=A(e,"click",r),l=!0)},p(t,n){a=t,n&2&&i!==(i=a[10].language+"")&&P(o,i)},d(t){t&&f(e),l=!1,c()}}}function je(a){let e,i=a[10].origin_language+"",o,l,c;function r(){return a[7](a[12])}return{c(){e=b("button"),o=N(i),this.h()},l(t){e=k(t,"BUTTON",{class:!0});var n=m(e);o=I(n,i),n.forEach(f),this.h()},h(){h(e,"class","px-4 py-2 bg-blue-500 text-white rounded-md m-2")},m(t,n){v(t,e,n),d(e,o),l||(c=A(e,"click",r),l=!0)},p(t,n){a=t,n&1&&i!==(i=a[10].origin_language+"")&&P(o,i)},d(t){t&&f(e),l=!1,c()}}}function Xe(a){let e,i,o,l;function c(n,s){return n[1]==null?Fe:n[2]==null?Ye:Qe}let r=c(a),t=r(a);return{c(){e=N(a[0]),i=O(),o=b("div"),l=b("div"),t.c(),this.h()},l(n){e=I(n,a[0]),i=j(n),o=k(n,"DIV",{id:!0,class:!0});var s=m(o);l=k(s,"DIV",{id:!0,class:!0});var u=m(l);t.l(u),u.forEach(f),s.forEach(f),this.h()},h(){h(l,"id","book_picker"),h(l,"class","bg-gray-700 rounded-xl p-8"),h(o,"id","backdrop"),h(o,"class","fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50")},m(n,s){v(n,e,s),v(n,i,s),v(n,o,s),d(o,l),t.m(l,null)},p(n,[s]){s&1&&P(e,n[0]),r===(r=c(n))&&t?t.p(n,s):(t.d(1),t=r(n),t&&(t.c(),t.m(l,null)))},i:ee,o:ee,d(n){n&&f(e),n&&f(i),n&&f(o),t.d()}}}function Ze(a,e,i){let{inventory:o}=e,{callback:l}=e;var c=null,r=null;o.length==1&&t(0);function t(_){i(1,c=o[_]),c.targets.length==1&&n(0)}function n(_){i(2,r=c.targets[_]),r.books.length==1&&s(0)}function s(_){const g=r.books[_];l(c.origin_language,r.language,g)}const u=_=>t(_),E=_=>n(_),S=_=>s(_);return a.$$set=_=>{"inventory"in _&&i(0,o=_.inventory),"callback"in _&&i(6,l=_.callback)},[o,c,r,t,n,s,l,u,E,S]}class et extends R{constructor(e){super(),$(this,e,Ze,Xe,K,{inventory:0,callback:6})}}var q=new Set,ce=new Set;class tt{constructor(e){pe(this,"vocabs");this.data=e,this.data=e,this.vocabs=new Set(e.filter(i=>typeof i!="string"))}fail(e){q.has(JSON.stringify(e))||(console.error("You failed a vocab you haven't seen yet",e),console.log("seen",q)),q.add(JSON.stringify(e)),ce.delete(JSON.stringify(e)),this.vocabs.delete(e)}finish(){this.vocabs.forEach(e=>{ce.add(JSON.stringify(e)),q.delete(JSON.stringify(e))})}}const lt=20;function nt(a){var e=Math.floor(Math.random()*3);return console.log("create_challenge",a),a=a.map(i=>{if(typeof i=="string")return i;{const[o,l]=i;return ce.has(JSON.stringify([o,l]))?(console.log("known",o,l),[o,l]):e>0?(e-=1,l):(e=lt,q.add(JSON.stringify([o,l])),[o,l])}}),console.log(a),new tt(a)}function ot(a){let e,i,o,l,c,r,t,n,s,u,E,S,_,g,p,w=a[0].data.length+"",C,H,V,W=a[0].title.replaceAll("_"," ")+"",Q,re,U,x,L,Y,J,se,ue;return i=new Re({props:{challenge:a[2]}}),{c(){e=b("div"),le(i.$$.fragment),o=O(),l=b("div"),c=b("button"),r=X("svg"),t=X("path"),s=O(),u=b("div"),E=b("input"),_=O(),g=b("div"),p=N("/"),C=N(w),H=O(),V=b("span"),Q=N(W),re=O(),U=b("button"),x=X("svg"),L=X("path"),this.h()},l(y){e=k(y,"DIV",{class:!0});var B=m(e);ne(i.$$.fragment,B),B.forEach(f),o=j(y),l=k(y,"DIV",{class:!0});var M=m(l);c=k(M,"BUTTON",{});var fe=m(c);r=Z(fe,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var he=m(r);t=Z(he,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),m(t).forEach(f),he.forEach(f),fe.forEach(f),s=j(M),u=k(M,"DIV",{class:!0});var F=m(u);E=k(F,"INPUT",{type:!0,min:!0,max:!0,class:!0}),_=j(F),g=k(F,"DIV",{class:!0});var ae=m(g);p=I(ae,"/"),C=I(ae,w),ae.forEach(f),F.forEach(f),H=j(M),V=k(M,"SPAN",{class:!0});var _e=m(V);Q=I(_e,W),_e.forEach(f),re=j(M),U=k(M,"BUTTON",{});var de=m(U);x=Z(de,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var ge=m(x);L=Z(ge,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),m(L).forEach(f),ge.forEach(f),de.forEach(f),M.forEach(f),this.h()},h(){h(e,"class","flex h-screen"),h(t,"stroke-linecap","round"),h(t,"stroke-linejoin","round"),h(t,"d","M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"),h(r,"xmlns","http://www.w3.org/2000/svg"),h(r,"fill","none"),h(r,"viewBox","0 0 24 24"),h(r,"stroke-width","1.5"),h(r,"stroke","currentColor"),h(r,"class","w-6 h-6"),c.disabled=n=a[1]<1,h(E,"type","number"),h(E,"min","1"),h(E,"max",S=a[0].data.length),h(E,"class","text-center"),h(g,"class","text-xl"),h(u,"class","columns-2"),h(V,"class","text text-center"),h(L,"stroke-linecap","round"),h(L,"stroke-linejoin","round"),h(L,"d","M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"),h(x,"xmlns","http://www.w3.org/2000/svg"),h(x,"fill","none"),h(x,"viewBox","0 0 24 24"),h(x,"stroke-width","1.5"),h(x,"stroke","currentColor"),h(x,"class","w-6 h-6"),U.disabled=Y=a[1]>=a[0].data.length-1,h(l,"class","btm-nav")},m(y,B){v(y,e,B),oe(i,e,null),v(y,o,B),v(y,l,B),d(l,c),d(c,r),d(r,t),d(l,s),d(l,u),d(u,E),ke(E,a[1]),d(u,_),d(u,g),d(g,p),d(g,C),d(l,H),d(l,V),d(V,Q),d(l,re),d(l,U),d(U,x),d(x,L),J=!0,se||(ue=[A(c,"click",a[4]),A(E,"input",a[6]),A(E,"input",a[5]),A(U,"click",a[3])],se=!0)},p(y,[B]){const M={};B&4&&(M.challenge=y[2]),i.$set(M),(!J||B&2&&n!==(n=y[1]<1))&&(c.disabled=n),(!J||B&1&&S!==(S=y[0].data.length))&&h(E,"max",S),B&2&&xe(E.value)!==y[1]&&ke(E,y[1]),(!J||B&1)&&w!==(w=y[0].data.length+"")&&P(C,w),(!J||B&1)&&W!==(W=y[0].title.replaceAll("_"," ")+"")&&P(Q,W),(!J||B&3&&Y!==(Y=y[1]>=y[0].data.length-1))&&(U.disabled=Y)},i(y){J||(T(i.$$.fragment,y),J=!0)},o(y){D(i.$$.fragment,y),J=!1},d(y){y&&f(e),ie(i),y&&f(o),y&&f(l),se=!1,Ue(ue)}}}function it(a,e,i){let{book:o}=e,l=1,c;n();function r(){i(1,l=Math.min(o.data.length+1,l+1)),n()}function t(){i(1,l=Math.max(1,l-1)),n()}function n(){c==null||c.finish(),i(2,c=nt(o.data[l-1][1]))}function s(){l=xe(this.value),i(1,l)}return a.$$set=u=>{"book"in u&&i(0,o=u.book)},[o,l,c,r,t,n,s]}class rt extends R{constructor(e){super(),$(this,e,it,ot,K,{book:0})}}function De(a){let e,i;return e=new rt({props:{book:a[0]}}),{c(){le(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,l){oe(e,o,l),i=!0},p(o,l){const c={};l&1&&(c.book=o[0]),e.$set(c)},i(o){i||(T(e.$$.fragment,o),i=!0)},o(o){D(e.$$.fragment,o),i=!1},d(o){ie(e,o)}}}function Se(a){let e,i;return e=new et({props:{inventory:a[1],callback:a[3]}}),{c(){le(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,l){oe(e,o,l),i=!0},p(o,l){const c={};l&2&&(c.inventory=o[1]),e.$set(c)},i(o){i||(T(e.$$.fragment,o),i=!0)},o(o){D(e.$$.fragment,o),i=!1},d(o){ie(e,o)}}}function st(a){let e,i,o,l,c,r,t,n,s,u,E,S,_=a[0]!=null&&De(a),g=a[2]&&Se(a);return{c(){_&&_.c(),e=O(),g&&g.c(),i=O(),o=b("dialog"),l=b("h2"),c=N("Dialog Box"),r=O(),t=b("p"),n=N("This is a sample dialog box."),s=O(),u=b("button"),E=N("Close"),this.h()},l(p){_&&_.l(p),e=j(p),g&&g.l(p),i=j(p),o=k(p,"DIALOG",{id:!0});var w=m(o);l=k(w,"H2",{});var C=m(l);c=I(C,"Dialog Box"),C.forEach(f),r=j(w),t=k(w,"P",{});var H=m(t);n=I(H,"This is a sample dialog box."),H.forEach(f),s=j(w),u=k(w,"BUTTON",{});var V=m(u);E=I(V,"Close"),V.forEach(f),w.forEach(f),this.h()},h(){h(o,"id","myDialog")},m(p,w){_&&_.m(p,w),v(p,e,w),g&&g.m(p,w),v(p,i,w),v(p,o,w),d(o,l),d(l,c),d(o,r),d(o,t),d(t,n),d(o,s),d(o,u),d(u,E),S=!0},p(p,[w]){p[0]!=null?_?(_.p(p,w),w&1&&T(_,1)):(_=De(p),_.c(),T(_,1),_.m(e.parentNode,e)):_&&(z(),D(_,1,1,()=>{_=null}),G()),p[2]?g?(g.p(p,w),w&4&&T(g,1)):(g=Se(p),g.c(),T(g,1),g.m(i.parentNode,i)):g&&(z(),D(g,1,1,()=>{g=null}),G())},i(p){S||(T(_),T(g),S=!0)},o(p){D(_),D(g),S=!1},d(p){_&&_.d(p),p&&f(e),g&&g.d(p),p&&f(i),p&&f(o)}}}function at(a,e,i){let o=null,l,c=!1;Ae(async()=>{$e().then(n=>{i(1,l=n),i(2,c=!0)}),window.addEventListener("keydown",n=>{n.key=="ArrowLeft"||n.key=="a"||["ArrowRight","d"," "].includes(n.key)})});let r={native_language:"",learning_language:"",title:""};function t(n,s,u){i(2,c=!1),r={native_language:n,learning_language:s,title:u},console.log("preferences",r),Ke(n,s,u).then(E=>i(0,o=E))}return[o,l,c,t]}class ft extends R{constructor(e){super(),$(this,e,at,st,K,{})}}export{ft as component};
